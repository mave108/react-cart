(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{190:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(40),l=a.n(c),o=(a(79),a(4)),i=a(5),s=a(8),u=a(6),d=a(7),m=(a(80),a(192)),p=a(194),b=a(193),f=a(2),h=a(10),v=function(e){return r.a.createElement("div",{className:"container"},e.children)},g=function(e){return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},e.children)},E=a(191),y=function(e){var t;return r.a.createElement("div",{className:"row",id:"pwd-container"},r.a.createElement("div",{className:"col-md-4"}),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("section",{className:"login-form"},r.a.createElement("form",{method:"post",action:"#",role:"login",onSubmit:(t=e.loginHandler,function(e){e.preventDefault(),t()})},r.a.createElement("input",{type:"text",onChange:function(t){return e.updateUsernameHandler(t.target.value)},name:"email",autoComplete:"off",placeholder:"Name",required:!0,defaultValue:e.username,className:"form-control input-lg"}),r.a.createElement("input",{type:"password",onChange:function(t){return e.updatePasswordHandler(t.target.value)},className:"form-control input-lg",id:"password",defaultValue:e.password,placeholder:"Password",required:!0}),!1===e.loggedinUser&&r.a.createElement(g,null,"Username or password incorrect"),r.a.createElement("button",{type:"submit",name:"go",className:"btn btn-lg btn-primary btn-block"},"Sign in")),r.a.createElement("div",{className:"form-links"},r.a.createElement(E.a,{to:"/",className:"nav-link"},"Return to home")))),r.a.createElement("div",{className:"col-md-4"}))},N=a(15),O=a(73),j=a(69),k=a.n(j),C=a(43),H=a.n(C),w=a(16),x=function(e,t,a){var n=new Date;return n.setDate(n.getDate()+a),H.a.save(e,t,{path:"/",expires:n,secure:!1})},P=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()},S=function(){return e="Logged_in_user",H.a.load(e)||!1;var e},T=a(70),U=a.n(T),D=function(){return function(e){e({type:"products",payload:[]}),e({type:"products",payload:JSON.parse(localStorage.getItem("products"))||[]})}},I=function(e){return function(t,a){var n=a().main.products.filter(function(t){return t.id!==e});localStorage.setItem("products",JSON.stringify(n)),t({type:"products",payload:n})}},R=function(){return function(e){e({type:"cart",payload:JSON.parse(localStorage.getItem("cart"))||[]})}},A=function(e){return function(t,a){var n=a(),r=n.main.cart;if(r&&r.length>0&&U()(r,function(t){return t.id===e})>-1)return!1;if(n.main.products){var c=n.main.products.filter(function(t){return t.id===e})[0];n.main.cart.length>0?r.push(c):r=[Object(N.a)({},c)]}return localStorage.setItem("cart",JSON.stringify(r)),t({type:"cart",payload:r}),!0}},q=function(e){return function(t,a){var n=a().main.cart.filter(function(t){return t.id!==e});localStorage.setItem("cart",JSON.stringify(n)),t({type:"cart",payload:n})}},_=function(e,t){return function(a){return a({type:"loggedin_user",payload:void 0}),k.a.get("".concat("https://swapi.co/api/","people/?search=").concat(e)).then(function(a){if(1===a.data.count){var n=a.data.results[0];return n.name===e&&n.birth_year===t&&n}return!1}).then(function(e){a({type:"loggedin_user",payload:e})})}},J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).updateUsernameHandler=function(e){a.setState({username:e})},a.updatePasswordHandler=function(e){a.setState({password:e})},a.loginHandler=function(){a.props.dispatch(_(a.state.username,a.state.password)).then(function(){a.props.loggedinUser&&a.loginSuccessAction()})},a.state={username:void 0,password:void 0},a.loginHandler=a.loginHandler.bind(Object(f.a)(Object(f.a)(a))),a.updateUsernameHandler=a.updateUsernameHandler.bind(Object(f.a)(Object(f.a)(a))),a.updatePasswordHandler=a.updatePasswordHandler.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){S()&&this.props.history.push("/product/add")}},{key:"loginSuccessAction",value:function(e){x("Logged_in_user",this.props.loggedinUser.name,1),this.props.history.push("/product/add")}},{key:"render",value:function(){return console.log("[login]",this.props),r.a.createElement(v,null,r.a.createElement(y,{username:this.state.username,password:this.state.password,loginHandler:this.loginHandler,updateUsernameHandler:this.updateUsernameHandler,updatePasswordHandler:this.updatePasswordHandler,loggedinUser:this.props.loggedinUser}))}}]),t}(r.a.Component);var M=Object(h.b)(function(e){return{loggedinUser:e.main.loggedinUser}},null)(J),L=(a(39),function(e){var t=S();return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light rounded"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarsExample10","aria-controls":"navbarsExample10","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement(E.a,{to:"/",className:"logo"},"Cart"),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarsExample10"},r.a.createElement("ul",{className:"navbar-nav justify-content-md-start"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(E.a,{to:"/",className:"nav-link active"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(E.a,{to:"/cart",className:"nav-link active"},"Cart")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(E.a,{to:"/product/add",className:"nav-link active"},"Add Product")),t?null:r.a.createElement("li",{className:"nav-item"},r.a.createElement(E.a,{to:"/login",className:"nav-link active"},"Login"))),t?r.a.createElement("ul",{className:"navbar-nav justify-content-end"},r.a.createElement("li",{className:"nav-item price"},r.a.createElement("span",{className:"nav-link"},"howdy: ",t)),r.a.createElement("li",{className:"nav-item"},r.a.createElement(E.a,{to:"/logout",className:"nav-link active"},"Logout"))):null))}),F=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"post-container"},this.props.products.map(function(t){return r.a.createElement("div",{className:"card product-card",key:t.id},r.a.createElement("div",{className:"card-body"},r.a.createElement("img",{className:"card-img-top",src:t.image,alt:t.title}),r.a.createElement("div",null,r.a.createElement("h5",{className:"card-title"},t.title),r.a.createElement("h3",null,"INR ",t.price),r.a.createElement("div",{className:"card-desc"},t.description)),r.a.createElement("button",{type:"submit",className:"btn btn-success product-btn",onClick:function(){return e.props.addToCartHandler(t.id)}},"Add to Cart"),"\xa0",S()?r.a.createElement("button",{type:"submit",className:"btn btn-danger product-btn",onClick:function(){return e.props.deleteHandler(t.id)}},"Delete"):null,"\xa0",r.a.createElement(E.a,{className:"btn btn-primary product-btn",to:"/product/".concat(t.id,"/detail")},"View Detail")))}))}}]),t}(r.a.Component),B=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={some:null},a.deleteProduct=a.deleteProduct.bind(Object(f.a)(Object(f.a)(a))),a.addToCartHandler=a.addToCartHandler.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(D()),this.props.dispatch(R())}},{key:"addToCartHandler",value:function(e){this.props.dispatch(A(e))?alert("Product added to cart successfully"):alert("Product already in cart")}},{key:"deleteProduct",value:function(e){var t=this;Object(w.confirmAlert)({title:"Confirm to delete?",message:"Are you sure to delete?",buttons:[{label:"Yes",onClick:function(){t.props.dispatch(I(e)),t.props.dispatch(q(e))}},{label:"No"}]})}},{key:"render",value:function(){return r.a.createElement(v,null,r.a.createElement(L,null),r.a.createElement("br",null),"undefined"!=typeof this.props.products&&this.props.products.length>0?r.a.createElement(F,{deleteHandler:this.deleteProduct,products:this.props.products,addToCartHandler:this.addToCartHandler}):r.a.createElement(g,null,"No Product found ",r.a.createElement(E.a,{to:"/product/add"},"Click")," to add new product."))}}]),t}(r.a.Component);var Y=Object(h.b)(function(e){return{products:e.main.products}},null)(B),V=function(e){var t=r.a.createRef(),a=r.a.createRef(),n=r.a.createRef(),c=r.a.createRef();return r.a.createElement("div",{className:"card add-product-card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{ref:e.formRef,onSubmit:function(r){!function(r){r.preventDefault();var l={title:t.current.value,price:a.current.value,image:n.current.value,description:c.current.value};t.current.value=null,a.current.value=null,n.current.value=null,c.current.value=null,e.submitHandler(l)}(r)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{ref:t,type:"text",required:"required",className:"form-control",id:"title",placeholder:"Title"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("input",{ref:a,type:"text",required:"required",className:"form-control",id:"price",placeholder:"Price"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"image"},"Image"),r.a.createElement("input",{ref:n,type:"text",required:"required",className:"form-control",id:"image",placeholder:"Image URL"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{ref:c,required:"required",name:"description",className:"form-control",rows:"5",id:"description",placeholder:"Description"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary product-btn"},"Submit"))))},W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={some:null},a.formRef=r.a.createRef(),a.submitHandler=a.submitHandler.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){S()||this.props.history.push("/login")}},{key:"submitHandler",value:function(e){var t;this.props.dispatch((t=e,function(e,a){var n,r=a();n=r.main.products?[Object(N.a)({},t,{id:P()})].concat(Object(O.a)(r.main.products)):[Object(N.a)({},t,{id:P()})],localStorage.setItem("products",JSON.stringify(n)),e({type:"products",payload:n})}))}},{key:"render",value:function(){return r.a.createElement(v,null,r.a.createElement(L,null),r.a.createElement("br",null),r.a.createElement(V,{formRef:this.formRef,submitHandler:this.submitHandler}))}}]),t}(r.a.Component);var $=Object(h.b)(function(e){return{products:e.main.products}},null)(W),z=function(e){return r.a.createElement("div",{className:"card shopping-cart"},r.a.createElement("div",{className:"card-header bg-dark text-light"},r.a.createElement("i",{className:"fa fa-shopping-cart","aria-hidden":"true"}),"Shipping cart",r.a.createElement(E.a,{to:"/",className:"btn btn-outline-info btn-sm pull-right",style:{float:"right"}},"Continiu shopping"),r.a.createElement("div",{className:"clearfix"})),r.a.createElement("div",{className:"card-body"},e.children),r.a.createElement("div",{className:"card-footer"},r.a.createElement("div",{className:"pull-right",style:{margin:"10px",float:"right"}},r.a.createElement("div",{className:"pull-right",style:{margin:"5px"}},"Total price: INR",r.a.createElement("b",null," ",e.cartTotal())))))},G=function(e){return e.cart.map(function(t){return r.a.createElement("div",{className:"row cart",key:t.id},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-2 text-center"},r.a.createElement("img",{className:"img-responsive",src:t.image,width:"120",height:"80"})),r.a.createElement("div",{className:"col-12 text-sm-center col-sm-12 text-md-left col-md-6"},r.a.createElement("h4",{className:"product-name"},r.a.createElement("strong",null,t.title)),r.a.createElement("h4",null,r.a.createElement("p",{className:"product-description"},t.description))),r.a.createElement("div",{className:"col-12 col-sm-12 text-sm-center col-md-4 text-md-right row"},r.a.createElement("div",{className:"col-3 col-sm-3 col-md-6 text-md-right",style:{paddingTop:"5px"}},r.a.createElement("h6",null,"INR ",r.a.createElement("strong",null,t.price))),r.a.createElement("div",{className:"col-4 col-sm-4 col-md-4"}),r.a.createElement("div",{className:"col-2 col-sm-2 col-md-2 text-right"},r.a.createElement("button",{type:"button",onClick:function(){return e.deleteCartHandler(t.id)},className:"btn btn-outline-danger btn-xs",style:{marginTop:"4px"}},r.a.createElement("i",{"aria-hidden":"true"},"\xd7")))))})},K=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={some:null},a.cartTotal=a.cartTotal.bind(Object(f.a)(Object(f.a)(a))),a.deleteCartHandler=a.deleteCartHandler.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(R())}},{key:"cartTotal",value:function(){var e=0;return"undefined"!=typeof this.props.cart&&this.props.cart.forEach(function(t){e+=parseInt(t.price)}),e}},{key:"deleteCartHandler",value:function(e){var t=this;Object(w.confirmAlert)({title:"Confirm to delete?",message:"Are you sure to delete?",buttons:[{label:"Yes",onClick:function(){return t.props.dispatch(q(e))}},{label:"No"}]})}},{key:"render",value:function(){return r.a.createElement(v,null,r.a.createElement(L,null),r.a.createElement("br",null),"undefined"!=typeof this.props.cart&&this.props.cart.length>0?r.a.createElement(z,{cartTotal:this.cartTotal},r.a.createElement(G,{cart:this.props.cart,deleteCartHandler:this.deleteCartHandler})):r.a.createElement(g,null,"Your cart is empty ",r.a.createElement(E.a,{to:"/"},"Click")," to add product to cart."),r.a.createElement("br",null),r.a.createElement("br",null))}}]),t}(r.a.Component);var Q=Object(h.b)(function(e){return{cart:e.main.cart}},null)(K),X=function(e){return r.a.createElement("div",{className:"jumbotron product-detail-box"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"media"},r.a.createElement("img",{className:"mr-3",src:e.detail.image}),r.a.createElement("div",{className:"media-body"},r.a.createElement("h5",{className:"mt-0"},e.detail.title),r.a.createElement("h4",{className:"price"},"Current Price: ",r.a.createElement("span",null,"INR ",e.detail.price)),e.detail.description,r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"btn btn-success product-btn",onClick:function(){return e.addToCartHandler(e.detail.id)}},"Add to Cart"),"\xa0",S()?r.a.createElement("button",{type:"submit",className:"btn btn-danger product-btn",onClick:function(){return e.deleteHandler(e.detail.id)}},"Delete"):null)))))},Z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={some:null},a.deleteProduct=a.deleteProduct.bind(Object(f.a)(Object(f.a)(a))),a.addToCartHandler=a.addToCartHandler.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(D()),this.props.dispatch(R())}},{key:"findProductById",value:function(e){return this.props.products.filter(function(t){return t.id===e})[0]}},{key:"addToCartHandler",value:function(e){this.props.dispatch(A(e))?alert("Product added to cart successfully"):alert("Product already in cart")}},{key:"deleteProduct",value:function(e){var t=this;Object(w.confirmAlert)({title:"Confirm to delete?",message:"Are you sure to delete?",buttons:[{label:"Yes",onClick:function(){t.props.dispatch(I(t.props.pid)),t.props.dispatch(q(t.props.pid)),t.props.history.push("/")}},{label:"No"}]})}},{key:"render",value:function(){return console.log("[detail]",this.props),r.a.createElement(v,null,r.a.createElement(L,null),r.a.createElement("br",null),"undefined"!=typeof this.props.products?r.a.createElement(X,{detail:this.findProductById(this.props.pid),addToCartHandler:this.addToCartHandler,deleteHandler:this.deleteProduct}):null)}}]),t}(r.a.Component);var ee=Object(h.b)(function(e){return{products:e.main.products}},null)(Z),te=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={username:void 0,password:void 0},x("Logged_in_user","",0),a.props.history.push("/"),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(v,null)}}]),t}(r.a.Component);var ae=Object(h.b)(function(e){return{loggedinUser:e.main.loggedinUser}},null)(te),ne=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,{basename:"/react-cart"},r.a.createElement(p.a,null,r.a.createElement(b.a,{path:"/product/:pid/detail"},function(e){return r.a.createElement(ee,{history:e.history,pid:e.match.params.pid})}),r.a.createElement(b.a,{path:"/product/add",exact:!0,component:$}),r.a.createElement(b.a,{path:"/cart",exact:!0,component:Q}),r.a.createElement(b.a,{path:"/login",exact:!0,component:M}),r.a.createElement(b.a,{path:"/logout",exact:!0,component:ae}),r.a.createElement(b.a,{path:"/",exact:!0,component:Y})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re=a(17),ce=a(72),le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"products":return Object(N.a)({},e,{products:t.payload});case"cart":return Object(N.a)({},e,{cart:t.payload});case"loggedin_user":return Object(N.a)({},e,{loggedinUser:t.payload});default:return e}},oe=Object(re.c)({main:le}),ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={hasError:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(g,null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component),se=Object(re.a)(ce.a)(re.d);l.a.render(r.a.createElement(h.a,{store:se(oe)},r.a.createElement(ie,null,r.a.createElement(ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},74:function(e,t,a){e.exports=a(190)},79:function(e,t,a){},80:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.949140bc.chunk.js.map